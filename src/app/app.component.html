<!--<input type="text" [(ngModel)]="title">-->

<div class="header">
  <h1>{{pageTitle}}</h1>
</div>
<div class="task">
  <h2>Hlavná úloha</h2>
  <!-- -->
  <!-- Menu -->
  <div class="menu">
    <button (click)="changeMenu(menu.USERS)">Používatelia</button>
    <button (click)="changeMenu(menu.BOOKS)">Knihy</button>
    <button (click)="changeMenu(menu.BORROWINGS)">Výpožičky</button>
    <button (click)="changeMenu(menu.GENRES)">Žánre</button>
  </div>
  <!-- Menu - pouzivatelia -->
  <ng-container *ngIf="actualMenu == menu.USERS">
    <h3>Používatelia</h3>
    <!-- Vstup -->
    <form [formGroup]="userForm">
      <label>ID:</label>
      <input type="number" formControlName="id" min="0">
      <label>Meno:</label>
      <input type="text" formControlName="name" required>
      <label>Kontakt:</label>
      <input type="text" formControlName="contact">
      <button (click)="saveUser()">Pridať používateľa</button>
    </form>
    <!-- Vystup -->
    <table *ngIf="users.length">
      <tr>
        <th>ID</th>
        <th>Meno</th>
        <th>Kontakt</th>
      </tr>
      <tr *ngFor="let user of users">
        <td>{{user.id}}</td>
        <td>{{user.name}}</td>
        <td>{{user.contact.length <= 0 ? 'Neuvedený' : user.contact}}</td>
      </tr>
    </table>
  </ng-container>
  <!-- Menu - Knihy -->
  <ng-container *ngIf="actualMenu == menu.BOOKS">
    <h3>Knihy</h3>
    <!-- Vstup -->
    <form [formGroup]="bookForm">
      <label>ID:</label>
      <input type="number" formControlName="id" min="0">
      <label>Názov knihy:</label>
      <input type="text" formControlName="name" required>
      <label>Autor:</label>
      <input type="text" formControlName="author" required>
      <label>Dostupnosť:</label>
      <input type="checkbox" formControlName="availability">
      <button (click)="saveBook()">Pridať knihu</button>
    </form>
    <!-- Vystup -->
    <table *ngIf="books.length">
      <tr>
        <th>ID</th>
        <th>Názov knihy</th>
        <th>Autor</th>
        <th>Dostupnosť</th>
      </tr>
      <tr *ngFor="let book of books">
        <td>{{book.id}}</td>
        <td>{{book.name}}</td>
        <td>{{book.author}}</td>
        <td>{{book.availability == true ? 'Dostupná' : 'Nedostupná'}}</td>
      </tr>
    </table>
  </ng-container>
  <!-- Menu - Pozicane -->
  <ng-container *ngIf="actualMenu == menu.BORROWINGS">
    <h3>Požičiavanie</h3>
    <!-- Vstup -->
    <form [formGroup]="borrForm">
      <label>ID:</label>
      <input type="number" formControlName="id" min="0">
      <label>Názov knihy:</label>
      <input type="text" formControlName="book_name">
      <label>Meno používateľa:</label>
      <input type="text" formControlName="user_name">
      <button (click)="saveBorrowing()">Pridaj pôžičku</button>
    </form>
    <!-- Vystup -->
    <table *ngIf="borrowings.length">
      <tr>
        <th>ID</th>
        <th>Názov knihy</th>
        <th>Meno používateľa</th>
      </tr>
      <tr *ngFor="let borrowing of borrowings">
        <td>{{borrowing.id}}</td>
        <td>{{borrowing.book_name}}</td>
        <td>{{borrowing.user_name}}</td>
      </tr>
    </table>
  </ng-container>
  <!-- Menu - Zanre (chyba zadanie) -->
  <ng-container *ngIf="actualMenu == menu.GENRES">
    <h2 class="err-message">404 - Nenájdené!</h2>
  </ng-container>
</div>
<div class="task bonus-task">
  <h2>Bonusová úloha</h2>
  <h3>Nová výpožička pomocou FormGroup</h3>
  <!-- Vstup -->
  <form [formGroup]="borrForm">
    <label>Používateľ</label>
    <select>
      <option value="0">Zvoľte používateľa</option>
      <option *ngFor="let user in users" formControlName="user_name">{{user.name}}</option>
    </select>
    <label>Kniha</label>
    <select>
      <option value="0">Zvoľte knihu</option>
      <option *ngFor="let book in books" formControlName="user_name">
        <ng-container *ngIf="book.availability == true">{{book.author}}: {{book.name}}</ng-container>
      </option>
    </select>
    <button (click)="saveBorrowing()">Vytvoriť výpožičku</button>
  </form>
  <!-- Vystup -->
  <table *ngIf="borrowings.length">
    <tr>
      <th>ID</th>
      <th>Názov knihy</th>
      <th>Meno používateľa</th>
    </tr>
    <tr *ngFor="let borrowing of borrowings">
      <td>{{borrowing.id}}</td>
      <td>{{borrowing.book_name}}</td>
      <td>{{borrowing.user_name}}</td>
    </tr>
  </table>
</div>
